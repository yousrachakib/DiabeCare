import"./bygoogle.BObXKNUP.js";import"./prf-down.DQLh_tOH.js";import{b as v,a as w,q as S,x as b,c as T,s as k}from"./index.DncgGPVN.js";import{o as E}from"./share-url.D6XI0DSw.js";import{p as $,h as u}from"./hue.DvCNu7MC.js";import{a2 as D}from"./reactivity.esm-bundler.CpmjAO0j.js";import"./video.C3UdALwV.js";import"./nav.BhWm1PPc.js";import"./11ja71b.DLpjRj5R.js";import"./client.B8LbMTih.js";import"./searchbar.CpyWLmoC.js";import"./client.BZt4fCs0.js";import"./howto.sjv3Uo3g.js";import"./client.DmSAW4MT.js";import"./core.BHQIw_Pf.js";function x(){import.meta.url,import("data:text/javascript,").catch(()=>1);async function*e(){}x.g=e}function L(e,n){if(!e)return;const t=document.getElementById(n)||document.createElement("iframe");t.id=n,t.src=e,document.body.appendChild(t)}function A(){if(!__DATA__.isBot){const{id:e,type:n}=o;v.get("/api/statistics/view",{id:e,type:n}),n=="1"?v.get("/api/statistics/detail-out-view",{id:e}):n=="5"&&$("font_detail",1,"come")}}const o=window._getDetailData(),y=D({spin:!1}),g=()=>{y.spin=!1},_=e=>{g(),e&&window.open(e,"_blank")},I=()=>{S("rbg_id_type","".concat(o.id,"_").concat(o.type),{domain:".pngtree.com",expires:1}),_("/remove-background")},R={png:"down-btnfreepng",rar:"down-btnfreerar",ppt:"down-btnfreerar",premium:"down-btnvippng",edit:"down-btnedit",freevideo:"down-btnfreevideo"};function W(e,n,t,i){if(!e||y.spin)return;const s=o.one>0||o.limitedTime,a=()=>{if(!s&&__DATA__.vipType<=0&&+o.vipType>0)return g(),i.dialog="upgrade-premium",!0};if(e==="remove-bg"){a()||(u("detail/ai-btn-remove-bg"),I());return}if(!__DATA__.isLogined){w.emit("_pri6n4"),u("down-btnnologin-"+e);return}switch(y.spin=!0,u(R[e]),e){case"png":case"rar":case"ppt":case"twibbon":const r=e==="png";n&&s?_(n):w.emit("_amemn8","*",{onend:g,type:o.type,btnType:e,licenseType:o.vipType||0,href:n,downUrl:n,rarName:t||"PSD",fee:o.fee&&r});break;case"edit":n&&o.editips&&confirm(o.editips)&&(n=n.replace(/\/canvas\/?\?/,"/canvas/designer.html?")),a()||_(n);break;case"freevideo":L(n,"down_ifr"),g();break;default:_(n);break}}b("_1r0qupz",e=>({tab:e.tab,prfLoading:!1,tabCls(n){return this.tab===n?"_c5516n":""},onTab(n){this.tab=n},licPrf(n){const t=this.$app;if(!t.tapLogin())return;const i=n==="enterprise",s=i?"team":"",a=o.one>0,{vipType:r,enterpriseStatus:f}=__DATA__,m=i?f!=1:r<=0;if(!a&&m)t.onDialog(i?"_5j84hy":"_1mbqn4s"),u("prfview-btn"+s);else if(!this.prfLoading){this.prfLoading=!0;const d=this._Refs.prfDown,p=()=>{this.prfLoading=!1};d.onshow({...d.getName(o.one,n),slidesdocs:!!o.slidesdocs,data:{action:"detail",id:o.id,type:o.type},resolve:p,reject:p}),u("prfdown-btn"+s)}}}));b("_1um5rr9",e=>({url:e.url,followed:e.is,loading:!1,onFollow(){const n=this.$app;!this.loading&&n.tapLogin()&&(this.loading=!0,v.post("/api/async/designer-follow",{id:e.uid}).then(t=>{this.loading=!1,t.status===200&&(this.followed=!this.followed)}).catch(()=>{this.loading=!1}))}}));b("_166ljwa",e=>{const n="_sstrbf";return{store:y,previewSpin:!1,videoSize:"",showH1:!1,wordsExpand:e.is2xl,wordsCount:"+10",wordsFromCls:e.is2xl?"":n,get showVideoDown(){return this.videoSize==="down"},hoverh1(t,i){if(t&&i){const s=document.createRange();s.selectNodeContents(i),t=s.getClientRects().length>2}this.showH1=t},"on:mounted"(){const t=this._Refs.hangs;t&&t.setIds(o.id,o.type),this.wordsCalc(!0),A()},wordsMinHeight(t){t.style.height="38px",t.style.overflow="hidden"},wordsOnExpand(){if(this.wordsFromCls=n,this.wordsExpand=!this.wordsExpand,this.wordsExpand){const t=this.$refs.wordsbtn,i=t&&t.parentElement;if(!i)return;i.appendChild(t)}else setTimeout(()=>{this.wordsCalc()},200)},wordsCalc(t){if(window.innerWidth<1024)return;const i=this.$refs.wordsbtn,s=i&&i.parentElement;if(!s)return;const a=()=>{i.classList.remove("_1i3kt2s")};if(t&&e.is2xl){a();return}const r=s.children,f=r.length,m=r[f-1];if(f<=1||m&&m.offsetTop<=0)return;const d=(p,l)=>{if(this.wordsCount="+"+(f-1-l),s.insertBefore(i,p),i.offsetTop>0){const C="previousElementSibling";let h=i[C];for(;h&&h.offsetTop>0;)h=h[C];h&&d(h,l-1)}else s._btn=p,s._btni=l;a()};if(s._btn){d(s._btn,s._btni);return}for(let p=0;p<f;p++){const l=r[p];if(l.offsetTop>0){d(l,p);break}}},onDownld(t,i,s){W(t,i,s,this.$app)},mDownld(){k(40,{target:document.querySelector("._bvrn6v")})},onCopy(){},onPreview(){if(this.previewSpin)return;const t=this.$refs.imgLink,i=this.$refs.image;if(!t||!i)return;const s=t.href||i.currentSrc||i.src;if(!s)return;const a=()=>{w.emit("_kuxk9d",{src:s,width:t._nw,height:t._nh}),this.previewSpin=!1};if(this.previewSpin=!0,setTimeout(()=>{u("detail-preview-image")},80),t._nw){a();return}const r=new Image;r.onload=()=>{t._nw=r.naturalWidth,t._nh=r.naturalHeight,a()},r.onabort=r.onerror=()=>{this.previewSpin=!1,$toast.error("Load failed!")},r.decoding="async",r.src=s},likeSpin(){const t=this._Refs.hangs;return t?t.likeSpin({id:o.id,type:o.type}):""},likeCls(){const t=this._Refs.hangs;return t?t.likeIcoCls({id:o.id,type:o.type}):""},onLike(){const t=this._Refs.hangs;t&&t.onLike(o.id,o.type)},urlCopying:!1,onShareUrl(){T(location.href).then(()=>(this.urlCopying=!0,this.$nextTick())).then(()=>{setTimeout(()=>{this.urlCopying=!1},2800)})},onShare(t){const i=this.$refs.image,s=i?i.currentSrc||i.src:q(o.shareimg);E({name:t,media:s,title:o.sharetit,word:o.shareword})},how2Attri(){const t=this._Refs.howToAttribute,i=this.$refs.lionName;t.onopen({type:o.type,url:location.pathname,usrName:i&&i.textContent||""})}}});function q(e){return/^https?:\/\//.test(e)?e:"https://png.pngtree.com"+e}const z=e=>e*(96/72);b("_e05maq",e=>({text:"",pt:e.pt,effectId:e.eid,loading:!1,get textCls(){return"effects-text"+this.effectId},get textStyl(){return"--font-size:".concat(z(this.pt),"px")},get fontText(){return this.text||e.p},ptCls(n){return this.pt===n?"_4x0icu":"_1t7gxnv"},ptClick(n){this.pt=n},effectCls(n){return this.effectId===n?"_1abob5y":"_oqy7bn"},effectClick(n){this.effectId=n},"on:mounted"(){B(),this.initCanvas()},initCanvas(){},downPng(){if(this.loading)return;if(this.$app.tapLogin()){const t=this.fontText.trim();if(!t)return;this.loading=!0;const i=()=>{this.loading=!1},s=this.$refs.spanTxt,a=s&&s.parentElement;if(!a)return;const r=this.$refs.canvas,f=getComputedStyle(s);w.emit("_h3jjzr",{styles:{left:s.offsetLeft,top:s.offsetTop+1.25,fontFamily:f.fontFamily,fontSize:parseInt(f.fontSize),fontWeight:f.fontWeight,fontStyle:f.fontStyle},effectId:this.effectId,text:t,textWidth:s.offsetWidth,canvasWidth:a.offsetWidth,canvasHeight:a.offsetHeight,cid:r.id,onok:i,onerr(){i(),$toast.error("Error!")}})}}}));function B(){const e=document.querySelector("style[data-font-style]");if(e&&e.sheet){const n=e.sheet.cssRules,t=n.length;for(let i=0;i<t;i++)H(n[i].cssText);e.parentElement.removeChild(e)}}let c;function H(e){c||(c=document.createElement("style"),document.head.appendChild(c),c.appendChild(document.createTextNode(""))),c.sheet&&c.sheet.insertRule(e,c.sheet.cssRules.length)}export{x as __vite_legacy_guard};
